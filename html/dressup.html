<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>하금티 취준</title>
  <style>
    .container {
      position: relative;
      width: 400px;
      height: 600px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
      margin-bottom: 20px;
    }

    .character {
      position: absolute;
      z-index: 0;
    }

    .clothes {
      cursor: grab;
      margin-right: 10px;
    }

    .clothes.dragging {
      opacity: 0.5;
    }

    .clothes.dropped {
      position: absolute;
      transform: translateX(-50%);
    }

    .clothes.dropped.hair1 {
      top: -2%;
      left: 58%;
      z-index: 3;
    }

    .clothes.dropped.hair2 {
      top: -1%;
      left: 59%;
      z-index: 3;
    }

    .clothes.dropped.hair3 {
      top: -1%;
      left: 58%;
      z-index: 3;
    }

    .clothes.dropped.shirt1 {
      top: 20%;
      left: 61%;
      z-index: 2;
    }

    .clothes.dropped.shirt2 {
      top: 20%;
      left: 59%;
      z-index: 2;
    }

    .clothes.dropped.shirt3 {
      top: 20%;
      left: 58%;
      z-index: 2;
    }

    .clothes.dropped.pants1 {
      top: 43%;
      left: 58%;
      z-index: 1;
    }

    .clothes.dropped.pants2 {
      top: 40%;
      left: 57%;
      z-index: 1;
    }

    .clothes.dropped.pants3 {
      top: 42%;
      left: 58%;
      z-index: 1;
    }

    .clothes.dropped.accessary1 {
      top: 9%;
      left: 59%;
      z-index: 4;
    }

    .clothes.dropped.accessary2 {
      top: 6%;
      left: 59%;
      z-index: 4;
    }

    .clothes.dropped.accessary3 {
      top: 45%;
      left: 75%;
      z-index: 4;
    }

    .clothes.dropped.accessary4 {
      top: 22%;
      left: 59%;
      z-index: 4;
    }

    .clothes.dropped.accessary5 {
      top: 24%;
      left: 59%;
      z-index: 4;
    }

    .clothes.dropped.shoes1-1 {
      top: 62%;
      left: 46%;
      z-index: 0;
    }

    .clothes.dropped.shoes1-2 {
      top: 62%;
      left: 71%;
      z-index: 0;
    }

    .clothes.dropped.shoes2-1 {
      top: 65%;
      left: 45%;
      z-index: 0;
    }

    .clothes.dropped.shoes2-2 {
      top: 65%;
      left: 72%;
      z-index: 0;
    }

    .clothes.dropped.shoes3-1 {
      top: 63%;
      left: 45%;
      z-index: 0;
    }

    .clothes.dropped.shoes3-2 {
      top: 63%;
      left: 73%;
      z-index: 0;
    }

    .clothes.dropped.shoes4-1 {
      top: 65%;
      left: 45%;
      z-index: 0;
    }

    .clothes.dropped.shoes4-2 {
      top: 65%;
      left: 74%;
      z-index: 0;
    }

    .clothes-panel {
      margin-top: 20px;
    }

    .reset-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ff6b6b;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .reset-button:hover {
      background-color: #ff5252;
    }

    .shoes-pair {
      display: inline-block;
      margin-right: 20px;
    }
  </style>
</head>

<body>
  <h1>하금티 취준</h1>
  <div class="container" id="characterContainer">
    <img src="../assets/cloth/character.png" alt="캐릭터" class="character" />
  </div>

  <div class="clothes-panel">
    <h3>액세서리</h3>
    <img src="../assets/cloth/accessary1.png" alt="액세서리1" class="clothes" draggable="true" />
    <img src="../assets/cloth/accessary2.png" alt="액세서리2" class="clothes" draggable="true" />
    <img src="../assets/cloth/accessary3.png" alt="액세서리3" class="clothes" draggable="true" />
    <img src="../assets/cloth/accessary4.png" alt="액세서리4" class="clothes" draggable="true" />
    <img src="../assets/cloth/accessary5.png" alt="액세서리5" class="clothes" draggable="true" />
    <h3>머리</h3>
    <img src="../assets/cloth/hair1.png" alt="머리1" class="clothes" draggable="true" />
    <img src="../assets/cloth/hair2.png" alt="머리2" class="clothes" draggable="true" />
    <img src="../assets/cloth/hair3.png" alt="머리3" class="clothes" draggable="true" />
    <h3>상의</h3>
    <img src="../assets/cloth/shirt1.png" alt="상의1" class="clothes" draggable="true" />
    <img src="../assets/cloth/shirt2.png" alt="상의2" class="clothes" draggable="true" />
    <img src="../assets/cloth/shirt3.png" alt="상의3" class="clothes" draggable="true" />
    <h3>하의</h3>
    <img src="../assets/cloth/pants1.png" alt="하의1" class="clothes" draggable="true" />
    <img src="../assets/cloth/pants2.png" alt="하의2" class="clothes" draggable="true" />
    <img src="../assets/cloth/pants3.png" alt="하의3" class="clothes" draggable="true" />
    <h3>신발</h3>
    <div class="shoes-pair">
      <img src="../assets/cloth/shoes1-1.png" alt="신발1-왼쪽" class="clothes" draggable="true" data-pair="shoes1" />
      <img src="../assets/cloth/shoes1-2.png" alt="신발1-오른쪽" class="clothes" draggable="true" data-pair="shoes1" />
    </div>
    <div class="shoes-pair">
      <img src="../assets/cloth/shoes2-1.png" alt="신발2-왼쪽" class="clothes" draggable="true" data-pair="shoes2" />
      <img src="../assets/cloth/shoes2-2.png" alt="신발2-오른쪽" class="clothes" draggable="true" data-pair="shoes2" />
    </div>
    <div class="shoes-pair">
      <img src="../assets/cloth/shoes3-1.png" alt="신발3-왼쪽" class="clothes" draggable="true" data-pair="shoes3" />
      <img src="../assets/cloth/shoes3-2.png" alt="신발3-오른쪽" class="clothes" draggable="true" data-pair="shoes3" />
    </div>
    <div class="shoes-pair">
      <img src="../assets/cloth/shoes4-1.png" alt="신발4-왼쪽" class="clothes" draggable="true" data-pair="shoes4" />
      <img src="../assets/cloth/shoes4-2.png" alt="신발4-오른쪽" class="clothes" draggable="true" data-pair="shoes4" />
    </div>
  </div>

  <button class="reset-button" id="resetButton">초기화</button>

  <script>
    const clothesItems = document.querySelectorAll('.clothes');
    const container = document.querySelector('.container');
    const resetButton = document.getElementById('resetButton');

    // 초기화 버튼 이벤트 리스너
    resetButton.addEventListener('click', () => {
      const droppedClothes = container.querySelectorAll('.dropped');
      droppedClothes.forEach(clothes => clothes.remove());
    });

    clothesItems.forEach(clothes => {
      clothes.addEventListener('dragstart', (e) => {
        clothes.classList.add('dragging');
      });

      clothes.addEventListener('dragend', (e) => {
        clothes.classList.remove('dragging');
      });
    });

    container.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    container.addEventListener('drop', (e) => {
      e.preventDefault();

      // 드롭된 위치가 컨테이너 내부인지 확인
      const rect = container.getBoundingClientRect();
      if (e.clientX >= rect.left && e.clientX <= rect.right &&
        e.clientY >= rect.top && e.clientY <= rect.bottom) {

        // 드래그된 의상 요소 찾기
        const draggedClothes = document.querySelector('.dragging');
        if (!draggedClothes) return;

        // 새로운 이미지 요소 생성
        const newClothes = document.createElement('img');
        newClothes.src = draggedClothes.src;
        newClothes.classList.add('clothes', 'dropped');

        // 의상 종류에 따라 다른 클래스 추가
        if (draggedClothes.src.includes('hair1')) {
          newClothes.classList.add('hair1');
          // 기존 머리 제거
          const existingHair = container.querySelectorAll('.dropped.hair1, .dropped.hair2, .dropped.hair3');
          existingHair.forEach(hair => hair.remove());
        } else if (draggedClothes.src.includes('hair2')) {
          newClothes.classList.add('hair2');
          // 기존 머리 제거
          const existingHair = container.querySelectorAll('.dropped.hair1, .dropped.hair2, .dropped.hair3');
          existingHair.forEach(hair => hair.remove());
        } else if (draggedClothes.src.includes('hair3')) {
          newClothes.classList.add('hair3');
          // 기존 머리 제거
          const existingHair = container.querySelectorAll('.dropped.hair1, .dropped.hair2, .dropped.hair3');
          existingHair.forEach(hair => hair.remove());
        } else if (draggedClothes.src.includes('shirt1')) {
          newClothes.classList.add('shirt1');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('shirt2')) {
          newClothes.classList.add('shirt2');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('shirt3')) {
          newClothes.classList.add('shirt3');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('pants1')) {
          newClothes.classList.add('pants1');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        } else if (draggedClothes.src.includes('pants2')) {
          newClothes.classList.add('pants2');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        } else if (draggedClothes.src.includes('pants3')) {
          newClothes.classList.add('pants3');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        } else if (draggedClothes.src.includes('accessary1')) {
          newClothes.classList.add('accessary1');
          // 기존 액세서리 제거
          const existingAccessary = container.querySelectorAll('.dropped.accessary1, .dropped.accessary2, .dropped.accessary3, .dropped.accessary4, .dropped.accessary5');
          existingAccessary.forEach(accessary => accessary.remove());
        } else if (draggedClothes.src.includes('accessary2')) {
          newClothes.classList.add('accessary2');
          // 기존 액세서리 제거
          const existingAccessary = container.querySelectorAll('.dropped.accessary1, .dropped.accessary2, .dropped.accessary3, .dropped.accessary4, .dropped.accessary5');
          existingAccessary.forEach(accessary => accessary.remove());
        } else if (draggedClothes.src.includes('accessary3')) {
          newClothes.classList.add('accessary3');
          // 기존 액세서리 제거
          const existingAccessary = container.querySelectorAll('.dropped.accessary1, .dropped.accessary2, .dropped.accessary3, .dropped.accessary4, .dropped.accessary5');
          existingAccessary.forEach(accessary => accessary.remove());
        } else if (draggedClothes.src.includes('accessary4')) {
          newClothes.classList.add('accessary4');
          // 기존 액세서리 제거
          const existingAccessary = container.querySelectorAll('.dropped.accessary1, .dropped.accessary2, .dropped.accessary3, .dropped.accessary4, .dropped.accessary5');
          existingAccessary.forEach(accessary => accessary.remove());
        } else if (draggedClothes.src.includes('accessary5')) {
          newClothes.classList.add('accessary5');
          // 기존 액세서리 제거
          const existingAccessary = container.querySelectorAll('.dropped.accessary1, .dropped.accessary2, .dropped.accessary3, .dropped.accessary4, .dropped.accessary5');
          existingAccessary.forEach(accessary => accessary.remove());
        } else if (draggedClothes.src.includes('shoes')) {
          // 신발 쌍 처리
          const shoesNumber = draggedClothes.src.match(/shoes(\d)/)[1];

          // 기존 신발 제거
          const existingShoes = container.querySelectorAll('[class*="shoes"]');
          existingShoes.forEach(shoes => shoes.remove());

          // 왼쪽 신발
          const leftShoe = document.createElement('img');
          leftShoe.src = `../assets/cloth/shoes${shoesNumber}-1.png`;
          leftShoe.classList.add('clothes', 'dropped', `shoes${shoesNumber}-1`);
          container.appendChild(leftShoe);

          // 오른쪽 신발
          const rightShoe = document.createElement('img');
          rightShoe.src = `../assets/cloth/shoes${shoesNumber}-2.png`;
          rightShoe.classList.add('clothes', 'dropped', `shoes${shoesNumber}-2`);
          container.appendChild(rightShoe);

          return; // 신발은 쌍으로 추가되었으므로 여기서 종료
        }

        // 컨테이너에 추가
        container.appendChild(newClothes);
      }
    });
  </script>
</body>

</html>