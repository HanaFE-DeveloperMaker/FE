<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>하금티 취준</title>
  <style>
    .container {
      position: relative;
      width: 400px;
      height: 600px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
      margin-bottom: 20px;
    }

    .character {
      position: absolute;
      z-index: 0;
    }

    .clothes {
      cursor: grab;
      margin-right: 10px;
    }

    .clothes.dragging {
      opacity: 0.5;
    }

    .clothes.dropped {
      position: absolute;
      transform: translateX(-50%);
    }

    .clothes.dropped.shirt1 {
      top: 20%;
      left: 61%;
      z-index: 2;
    }

    .clothes.dropped.shirt2 {
      top: 20%;
      left: 59%;
      z-index: 2;
    }

    .clothes.dropped.shirt3 {
      top: 20%;
      left: 58%;
      z-index: 2;
    }

    .clothes.dropped.pants1 {
      top: 43%;
      left: 58%;
      z-index: 1;
    }

    .clothes.dropped.pants2 {
      top: 40%;
      left: 57%;
      z-index: 1;
    }

    .clothes.dropped.pants3 {
      top: 42%;
      left: 58%;
      z-index: 1;
    }

    .clothes-panel {
      margin-top: 20px;
    }

    .reset-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ff6b6b;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .reset-button:hover {
      background-color: #ff5252;
    }
  </style>
</head>

<body>
  <h1>하금티 취준</h1>
  <div class="container" id="characterContainer">
    <img src="../assets/cloth/character.png" alt="캐릭터" class="character" />
  </div>

  <div class="clothes-panel">
    <h3>상의</h3>
    <img src="../assets/cloth/shirt1.png" alt="상의1" class="clothes" draggable="true" />
    <img src="../assets/cloth/shirt2.png" alt="상의2" class="clothes" draggable="true" />
    <img src="../assets/cloth/shirt3.png" alt="상의3" class="clothes" draggable="true" />
    <h3>하의</h3>
    <img src="../assets/cloth/pants1.png" alt="하의1" class="clothes" draggable="true" />
    <img src="../assets/cloth/pants2.png" alt="하의2" class="clothes" draggable="true" />
    <img src="../assets/cloth/pants3.png" alt="하의3" class="clothes" draggable="true" />
  </div>

  <button class="reset-button" id="resetButton">초기화</button>

  <script>
    const clothesItems = document.querySelectorAll('.clothes');
    const container = document.querySelector('.container');
    const resetButton = document.getElementById('resetButton');

    // 초기화 버튼 이벤트 리스너
    resetButton.addEventListener('click', () => {
      const droppedClothes = container.querySelectorAll('.dropped');
      droppedClothes.forEach(clothes => clothes.remove());
    });

    clothesItems.forEach(clothes => {
      clothes.addEventListener('dragstart', (e) => {
        clothes.classList.add('dragging');
      });

      clothes.addEventListener('dragend', (e) => {
        clothes.classList.remove('dragging');
      });
    });

    container.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    container.addEventListener('drop', (e) => {
      e.preventDefault();

      // 드롭된 위치가 컨테이너 내부인지 확인
      const rect = container.getBoundingClientRect();
      if (e.clientX >= rect.left && e.clientX <= rect.right &&
        e.clientY >= rect.top && e.clientY <= rect.bottom) {

        // 드래그된 의상 요소 찾기
        const draggedClothes = document.querySelector('.dragging');
        if (!draggedClothes) return;

        // 새로운 이미지 요소 생성
        const newClothes = document.createElement('img');
        newClothes.src = draggedClothes.src;
        newClothes.classList.add('clothes', 'dropped');

        // 의상 종류에 따라 다른 클래스 추가
        if (draggedClothes.src.includes('shirt1')) {
          newClothes.classList.add('shirt1');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('shirt2')) {
          newClothes.classList.add('shirt2');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('shirt3')) {
          newClothes.classList.add('shirt3');
          // 기존 상의 제거
          const existingShirts = container.querySelectorAll('.dropped.shirt1, .dropped.shirt2, .dropped.shirt3');
          existingShirts.forEach(shirt => shirt.remove());
        } else if (draggedClothes.src.includes('pants1')) {
          newClothes.classList.add('pants1');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        } else if (draggedClothes.src.includes('pants2')) {
          newClothes.classList.add('pants2');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        } else if (draggedClothes.src.includes('pants3')) {
          newClothes.classList.add('pants3');
          // 기존 하의 제거
          const existingPants = container.querySelectorAll('.dropped.pants1, .dropped.pants2, .dropped.pants3');
          existingPants.forEach(pants => pants.remove());
        }

        // 컨테이너에 추가
        container.appendChild(newClothes);
      }
    });
  </script>
</body>

</html>